-- Test Setup: window_like
-- InfluxQL: SELECT difference(writes) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z';
name: diskio
+---------------------+------------+
| time                | difference |
+---------------------+------------+
| 2020-06-11T16:53:10 | 164        |
| 2020-06-11T16:53:20 | 187        |
| 2020-06-11T16:53:30 | 112        |
| 2020-06-11T16:53:40 | 110        |
| 2020-06-11T16:53:50 | 219        |
| 2020-06-11T16:54:00 | 75         |
| 2020-06-11T16:54:10 | 76         |
| 2020-06-11T16:54:20 | 146        |
+---------------------+------------+
-- InfluxQL: SELECT difference(usage_idle) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu =~ /^cpu(0|1)$/ GROUP BY cpu;
name: cpu
tags: cpu=cpu0
+---------------------+----------------------+
| time                | difference           |
+---------------------+----------------------+
| 2020-06-11T16:53:10 | 2.976802976802972    |
| 2020-06-11T16:53:20 | -0.878900878900879   |
| 2020-06-11T16:53:30 | 1.3890109890109983   |
| 2020-06-11T16:53:40 | -0.10970970970971905 |
| 2020-06-11T16:53:50 | -0.4902902902902895  |
| 2020-06-11T16:54:00 | 0.29009009009008935  |
| 2020-06-11T16:54:10 | -1.2677348006689328  |
+---------------------+----------------------+
name: cpu
tags: cpu=cpu1
+---------------------+------------------------+
| time                | difference             |
+---------------------+------------------------+
| 2020-06-11T16:53:10 | -0.09980019980019961   |
| 2020-06-11T16:53:20 | 0.09980019980019961    |
| 2020-06-11T16:53:30 | 0.0                    |
| 2020-06-11T16:53:40 | -0.0001001001001128543 |
| 2020-06-11T16:53:50 | -0.09970009970008675   |
| 2020-06-11T16:54:00 | 0.09959979899859661    |
| 2020-06-11T16:54:10 | -0.09959979899859661   |
+---------------------+------------------------+
-- InfluxQL: SELECT difference(mean(writes)) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s);
name: diskio
+---------------------+------------+
| time                | difference |
+---------------------+------------+
| 2020-06-11T16:53:08 | 164.0      |
| 2020-06-11T16:53:15 | 187.0      |
| 2020-06-11T16:53:29 | 112.0      |
| 2020-06-11T16:53:36 | 110.0      |
| 2020-06-11T16:53:50 | 219.0      |
| 2020-06-11T16:53:57 | 75.0       |
| 2020-06-11T16:54:04 | 76.0       |
| 2020-06-11T16:54:18 | 146.0      |
+---------------------+------------+
-- InfluxQL: SELECT difference(mean(writes)) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(30s);
name: diskio
+---------------------+-------------------+
| time                | difference        |
+---------------------+-------------------+
| 2020-06-11T16:53:00 | 433.6666666669771 |
| 2020-06-11T16:53:30 | 437.6666666660458 |
| 2020-06-11T16:54:00 | 357.0             |
+---------------------+-------------------+
-- InfluxQL: SELECT difference(mean(writes)) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s) fill(0);
name: diskio
+---------------------+------------+
| time                | difference |
+---------------------+------------+
| 2020-06-11T16:52:54 | 5592646.0  |
| 2020-06-11T16:53:01 | -5592646.0 |
| 2020-06-11T16:53:08 | 5592810.0  |
| 2020-06-11T16:53:15 | 187.0      |
| 2020-06-11T16:53:22 | -5592997.0 |
| 2020-06-11T16:53:29 | 5593109.0  |
| 2020-06-11T16:53:36 | 110.0      |
| 2020-06-11T16:53:43 | -5593219.0 |
| 2020-06-11T16:53:50 | 5593438.0  |
| 2020-06-11T16:53:57 | 75.0       |
| 2020-06-11T16:54:04 | 76.0       |
| 2020-06-11T16:54:11 | -5593589.0 |
| 2020-06-11T16:54:18 | 5593735.0  |
| 2020-06-11T16:54:25 | -5593735.0 |
| 2020-06-11T16:54:32 | 0.0        |
| 2020-06-11T16:54:39 | 0.0        |
| 2020-06-11T16:54:46 | 0.0        |
| 2020-06-11T16:54:53 | 0.0        |
+---------------------+------------+
-- InfluxQL: SELECT difference(mean(writes)) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s) fill(previous);
name: diskio
+---------------------+------------+
| time                | difference |
+---------------------+------------+
| 2020-06-11T16:53:01 | 0.0        |
| 2020-06-11T16:53:08 | 164.0      |
| 2020-06-11T16:53:15 | 187.0      |
| 2020-06-11T16:53:22 | 0.0        |
| 2020-06-11T16:53:29 | 112.0      |
| 2020-06-11T16:53:36 | 110.0      |
| 2020-06-11T16:53:43 | 0.0        |
| 2020-06-11T16:53:50 | 219.0      |
| 2020-06-11T16:53:57 | 75.0       |
| 2020-06-11T16:54:04 | 76.0       |
| 2020-06-11T16:54:11 | 0.0        |
| 2020-06-11T16:54:18 | 146.0      |
| 2020-06-11T16:54:25 | 0.0        |
| 2020-06-11T16:54:32 | 0.0        |
| 2020-06-11T16:54:39 | 0.0        |
| 2020-06-11T16:54:46 | 0.0        |
| 2020-06-11T16:54:53 | 0.0        |
+---------------------+------------+
-- InfluxQL: SELECT difference(mean(writes)) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s) fill(linear);
name: diskio
+---------------------+------------+
| time                | difference |
+---------------------+------------+
| 2020-06-11T16:53:01 | 82.0       |
| 2020-06-11T16:53:08 | 82.0       |
| 2020-06-11T16:53:15 | 187.0      |
| 2020-06-11T16:53:22 | 56.0       |
| 2020-06-11T16:53:29 | 56.0       |
| 2020-06-11T16:53:36 | 110.0      |
| 2020-06-11T16:53:43 | 109.5      |
| 2020-06-11T16:53:50 | 109.5      |
| 2020-06-11T16:53:57 | 75.0       |
| 2020-06-11T16:54:04 | 76.0       |
| 2020-06-11T16:54:11 | 73.0       |
| 2020-06-11T16:54:18 | 73.0       |
+---------------------+------------+
-- InfluxQL: SELECT difference(mean(usage_idle)) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu =~ /^cpu(0|1)$/ GROUP BY TIME(30s), cpu;
name: cpu
tags: cpu=cpu0
+---------------------+---------------------+
| time                | difference          |
+---------------------+---------------------+
| 2020-06-11T16:53:00 | 1.9489658560635377  |
| 2020-06-11T16:53:30 | 1.5587748254415033  |
| 2020-06-11T16:54:00 | -0.7072074070078145 |
+---------------------+---------------------+
name: cpu
tags: cpu=cpu1
+---------------------+------------------------+
| time                | difference             |
+---------------------+------------------------+
| 2020-06-11T16:53:00 | 0.03313852030396447    |
| 2020-06-11T16:53:30 | -0.0000333667000376181 |
| 2020-06-11T16:54:00 | -0.0167002003341139    |
+---------------------+------------------------+
-- InfluxQL: SELECT non_negative_difference(usage_idle) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu = 'cpu0';
name: cpu
+---------------------+-------------------------+
| time                | non_negative_difference |
+---------------------+-------------------------+
| 2020-06-11T16:53:10 | 2.976802976802972       |
| 2020-06-11T16:53:30 | 1.3890109890109983      |
| 2020-06-11T16:54:00 | 0.29009009009008935     |
+---------------------+-------------------------+
-- InfluxQL: SELECT non_negative_difference(usage_idle) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu =~ /^cpu(0|1)$/ GROUP BY cpu;
name: cpu
tags: cpu=cpu0
+---------------------+-------------------------+
| time                | non_negative_difference |
+---------------------+-------------------------+
| 2020-06-11T16:53:10 | 2.976802976802972       |
| 2020-06-11T16:53:30 | 1.3890109890109983      |
| 2020-06-11T16:54:00 | 0.29009009009008935     |
+---------------------+-------------------------+
name: cpu
tags: cpu=cpu1
+---------------------+-------------------------+
| time                | non_negative_difference |
+---------------------+-------------------------+
| 2020-06-11T16:53:20 | 0.09980019980019961     |
| 2020-06-11T16:53:30 | 0.0                     |
| 2020-06-11T16:54:00 | 0.09959979899859661     |
+---------------------+-------------------------+
-- InfluxQL: SELECT non_negative_difference(mean(usage_idle)) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu =~ /^cpu(0|1)$/ GROUP BY TIME(30s), cpu;
name: cpu
tags: cpu=cpu0
+---------------------+-------------------------+
| time                | non_negative_difference |
+---------------------+-------------------------+
| 2020-06-11T16:53:00 | 1.9489658560635377      |
| 2020-06-11T16:53:30 | 1.5587748254415033      |
+---------------------+-------------------------+
name: cpu
tags: cpu=cpu1
+---------------------+-------------------------+
| time                | non_negative_difference |
+---------------------+-------------------------+
| 2020-06-11T16:53:00 | 0.03313852030396447     |
+---------------------+-------------------------+
-- InfluxQL: SELECT moving_average(mean(writes), 3) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s);
name: diskio
+---------------------+-------------------+
| time                | moving_average    |
+---------------------+-------------------+
| 2020-06-11T16:53:15 | 5592817.666666667 |
| 2020-06-11T16:53:29 | 5592972.0         |
| 2020-06-11T16:53:36 | 5593108.333333333 |
| 2020-06-11T16:53:50 | 5593255.333333333 |
| 2020-06-11T16:53:57 | 5593390.0         |
| 2020-06-11T16:54:04 | 5593513.333333333 |
| 2020-06-11T16:54:18 | 5593612.333333333 |
+---------------------+-------------------+
-- InfluxQL: SELECT moving_average(mean(writes), 3) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s) fill(0);
name: diskio
+---------------------+--------------------+
| time                | moving_average     |
+---------------------+--------------------+
| 2020-06-11T16:53:01 | 1864215.3333333333 |
| 2020-06-11T16:53:08 | 3728485.3333333335 |
| 2020-06-11T16:53:15 | 3728602.3333333335 |
| 2020-06-11T16:53:22 | 3728602.3333333335 |
| 2020-06-11T16:53:29 | 3728702.0          |
| 2020-06-11T16:53:36 | 3728776.0          |
| 2020-06-11T16:53:43 | 3728776.0          |
| 2020-06-11T16:53:50 | 3728885.6666666665 |
| 2020-06-11T16:53:57 | 3728983.6666666665 |
| 2020-06-11T16:54:04 | 5593513.333333333  |
| 2020-06-11T16:54:11 | 3729034.0          |
| 2020-06-11T16:54:18 | 3729108.0          |
| 2020-06-11T16:54:25 | 1864578.3333333333 |
| 2020-06-11T16:54:32 | 1864578.3333333333 |
| 2020-06-11T16:54:39 | 0.0                |
| 2020-06-11T16:54:46 | 0.0                |
| 2020-06-11T16:54:53 | 0.0                |
+---------------------+--------------------+
-- InfluxQL: SELECT moving_average(mean(writes), 3) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s) fill(previous);
name: diskio
+---------------------+-------------------+
| time                | moving_average    |
+---------------------+-------------------+
| 2020-06-11T16:53:08 | 5592700.666666667 |
| 2020-06-11T16:53:15 | 5592817.666666667 |
| 2020-06-11T16:53:22 | 5592934.666666667 |
| 2020-06-11T16:53:29 | 5593034.333333333 |
| 2020-06-11T16:53:36 | 5593108.333333333 |
| 2020-06-11T16:53:43 | 5593182.333333333 |
| 2020-06-11T16:53:50 | 5593292.0         |
| 2020-06-11T16:53:57 | 5593390.0         |
| 2020-06-11T16:54:04 | 5593513.333333333 |
| 2020-06-11T16:54:11 | 5593563.666666667 |
| 2020-06-11T16:54:18 | 5593637.666666667 |
| 2020-06-11T16:54:25 | 5593686.333333333 |
| 2020-06-11T16:54:32 | 5593735.0         |
| 2020-06-11T16:54:39 | 5593735.0         |
| 2020-06-11T16:54:46 | 5593735.0         |
| 2020-06-11T16:54:53 | 5593735.0         |
+---------------------+-------------------+
-- InfluxQL: SELECT moving_average(mean(writes), 3) FROM diskio WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' GROUP BY time(7s) fill(linear);
name: diskio
+---------------------+-------------------+
| time                | moving_average    |
+---------------------+-------------------+
| 2020-06-11T16:53:08 | 5592728.0         |
| 2020-06-11T16:53:15 | 5592845.0         |
| 2020-06-11T16:53:22 | 5592953.333333333 |
| 2020-06-11T16:53:29 | 5593053.0         |
| 2020-06-11T16:53:36 | 5593127.0         |
| 2020-06-11T16:53:43 | 5593218.833333333 |
| 2020-06-11T16:53:50 | 5593328.5         |
| 2020-06-11T16:53:57 | 5593426.5         |
| 2020-06-11T16:54:04 | 5593513.333333333 |
| 2020-06-11T16:54:11 | 5593588.0         |
| 2020-06-11T16:54:18 | 5593662.0         |
+---------------------+-------------------+
-- InfluxQL: SELECT difference(usage_idle), non_negative_difference(usage_idle), moving_average(usage_idle, 4) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu =~ /^cpu(0|1)$/ GROUP BY cpu;
name: cpu
tags: cpu=cpu0
+---------------------+----------------------+-------------------------+-------------------+
| time                | difference           | non_negative_difference | moving_average    |
+---------------------+----------------------+-------------------------+-------------------+
| 2020-06-11T16:53:10 | 2.976802976802972    | 2.976802976802972       |                   |
| 2020-06-11T16:53:20 | -0.878900878900879   |                         |                   |
| 2020-06-11T16:53:30 | 1.3890109890109983   | 1.3890109890109983      | 89.05349145349146 |
| 2020-06-11T16:53:40 | -0.10970970970971905 |                         | 89.89779229779231 |
| 2020-06-11T16:53:50 | -0.4902902902902895  |                         | 89.87531982531982 |
| 2020-06-11T16:54:00 | 0.29009009009008935  | 0.29009009009008935     | 90.14509509509509 |
| 2020-06-11T16:54:10 | -1.2677348006689328  |                         | 89.75068391745037 |
+---------------------+----------------------+-------------------------+-------------------+
name: cpu
tags: cpu=cpu1
+---------------------+------------------------+-------------------------+-------------------+
| time                | difference             | non_negative_difference | moving_average    |
+---------------------+------------------------+-------------------------+-------------------+
| 2020-06-11T16:53:10 | -0.09980019980019961   |                         |                   |
| 2020-06-11T16:53:20 | 0.09980019980019961    | 0.09980019980019961     |                   |
| 2020-06-11T16:53:30 | 0.0                    | 0.0                     | 99.87504995004994 |
| 2020-06-11T16:53:40 | -0.0001001001001128543 |                         | 99.87502492502492 |
| 2020-06-11T16:53:50 | -0.09970009970008675   |                         | 99.87502492502492 |
| 2020-06-11T16:54:00 | 0.09959979899859661    | 0.09959979899859661     | 99.87497482482453 |
| 2020-06-11T16:54:10 | -0.09959979899859661   |                         | 99.85002477487447 |
+---------------------+------------------------+-------------------------+-------------------+
-- InfluxQL: SELECT difference(mean(usage_idle)), non_negative_difference(mean(usage_idle)), moving_average(mean(usage_idle), 4) FROM cpu WHERE time >= '2020-06-11T16:53:00Z' AND time < '2020-06-11T16:55:00Z' AND cpu =~ /^cpu(0|1)$/ GROUP BY TIME(30s), cpu;
name: cpu
tags: cpu=cpu0
+---------------------+---------------------+-------------------------+-------------------+
| time                | difference          | non_negative_difference | moving_average    |
+---------------------+---------------------+-------------------------+-------------------+
| 2020-06-11T16:53:00 | 1.9489658560635377  | 1.9489658560635377      |                   |
| 2020-06-11T16:53:30 | 1.5587748254415033  | 1.5587748254415033      |                   |
| 2020-06-11T16:54:00 | -0.7072074070078145 |                         | 88.71999936827484 |
+---------------------+---------------------+-------------------------+-------------------+
name: cpu
tags: cpu=cpu1
+---------------------+------------------------+-------------------------+-------------------+
| time                | difference             | non_negative_difference | moving_average    |
+---------------------+------------------------+-------------------------+-------------------+
| 2020-06-11T16:53:00 | 0.03313852030396447    | 0.03313852030396447     |                   |
| 2020-06-11T16:53:30 | -0.0000333667000376181 |                         |                   |
| 2020-06-11T16:54:00 | -0.0167002003341139    |                         | 99.85425690322373 |
+---------------------+------------------------+-------------------------+-------------------+